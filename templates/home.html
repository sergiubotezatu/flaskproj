{%extends "base.html"%}
{%block title%}Home{%endblock%}
{%block content%}
{%with messages = get_flashed_messages()%}
  {%if messages%}
    {%for note in messages%}
    <div class="success">
    </br>
      <strong><p>{{note}}</p></strong>
    </div>
    {%endfor%}
    {%endif%}
{%endwith%}
<div id="logoverlay" onclick="MessOff(this.id)">
  <div id="box">
  <p id ="mess">Are you sure you want to logout?</p>
  <div id = "requestDel" method = "Post">  
      <a href = "/logout"><input type = "button" id = "yes" value ="Yes"></a>
      <input type="button" id = "no" value ="No" onclick="MessOff('overlay')">
  </div>
  </div>
</div>
  <span style = "color:white;position:absolute;top:175px;left:20px;margin-right:20px">Filter posts</span>
  <div class = "filter-field">
    <div class = "filters">
      <form method="post">
      {%for filtered in filters%}
      <span style = "border:1px solid steelblue;padding:3px;">{{filtered[1]}}
        <input type = "hidden" name = "name" value = {{filtered[1]}}>
        <input type = "hidden" id = "id" name = "id" value = {{filtered[0]}}>
        <input type="submit" id="filter" name="user" value="x">
      </span>
      {%endfor%}
      <i class = "arrow" ></i></form>
  </div>
  {%for notfiltered in users%}
    <form id = "test" method ="post">
    <input type = "hidden" name ="name" value = {{notfiltered[1]}}>
    <input type="checkbox" id="filter-name" name="user" value = {{notfiltered[0]}}
    onchange="document.getElementById('test').submit()">{{notfiltered[1]}}</input>
  </form>
  {%endfor%}
</div>
  <div class="row">
      {% for item in allposts%}
      <div class="column">
      {%if item[0] == "Ch1"%}
      <a href= "/post/create" style ="color:black; text-decoration:none; ">
      {%else%}
      <a href="{{ '/post/read/%s'%item[0]|urlencode }}" style ="color:black; text-decoration:none; ">
      {%endif%}
        <div class="post" title ="Click to Read More">
         <h3 class = "item" style ="margin-left:auto;margin-right:auto;">{{item[1].title}}</h3>
         <h4 class = "item" class ="higlight">by {{item[1].auth}}</h4>
         <div class = "item" style ="text-align:justify;">{{item[1].content}}</div>
        <span class = "item" style = "float: right">{{item[1].created}}</span>
        </div>
      </a>
    </div>
    {%endfor%}
  </div> 
{%endblock%}